<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五笔字根练习键盘 - 完整字根版</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #3a7bd5);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            padding: 25px;
            margin-top: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
        }
        
        h1 {
            color: #1a2a6c;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .subtitle {
            color: #3a7bd5;
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1a2a6c;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        .input-display {
            margin-bottom: 30px;
        }
        
        .input-area {
            width: 100%;
            min-height: 100px;
            padding: 20px;
            font-size: 1.8rem;
            border: 3px solid #3a7bd5;
            border-radius: 12px;
            background-color: #f8fbff;
            color: #1a2a6c;
            resize: none;
            overflow-y: auto;
            box-shadow: inset 0 3px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        .current-key-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #eef5ff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
        }
        
        .key-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .key-display {
            background: #1a2a6c;
            color: white;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            border-radius: 8px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }
        
        .radical-info {
            font-size: 1.2rem;
            color: #1a2a6c;
        }
        
        .keyboard-container {
            background: #f1f5f9;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 12px;
        }
        
        .key {
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border: 2px solid #d1d9e6;
            border-radius: 8px;
            height: 85px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        
        .key:hover {
            background: linear-gradient(to bottom, #f0f7ff, #e1eeff);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        
        .key.active {
            background: linear-gradient(to bottom, #3a7bd5, #1a2a6c);
            color: white;
            border-color: #1a2a6c;
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .key-label {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1a2a6c;
            margin-bottom: 5px;
        }
        
        .key.active .key-label {
            color: white;
        }
        
        .radicals {
            font-size: 0.85rem;
            color: #e63946;
            text-align: center;
            line-height: 1.2;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 3px;
            padding: 0 3px;
            min-height: 35px;
        }
        
        .key.active .radicals {
            color: #ffcc00;
        }
        
        .key-space {
            width: 400px;
        }
        
        .key-enter, .key-backspace {
            width: 100px;
        }
        
        .key-tab, .key-capslock {
            width: 90px;
        }
        
        .key-shift {
            width: 120px;
        }
        
        .key-ctrl, .key-alt {
            width: 80px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 28px;
            font-size: 1.1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-start {
            background: linear-gradient(to right, #1a2a6c, #3a7bd5);
            color: white;
        }
        
        .btn-reset {
            background: linear-gradient(to right, #f46b45, #eea849);
            color: white;
        }
        
        .btn-clear {
            background: linear-gradient(to right, #8e9eab, #eef2f3);
            color: #333;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: white;
            font-size: 0.9rem;
            padding: 20px;
            opacity: 0.8;
        }
        
        .instructions {
            background: #eef5ff;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 5px solid #3a7bd5;
        }
        
        .instructions h3 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #444;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .radical-detail {
            font-size: 1rem;
            margin-top: 5px;
            color: #666;
        }
        
        .radical-item {
            display: inline-block;
            margin: 0 2px;
            font-weight: 500;
        }
        
        @media (max-width: 1100px) {
            .key {
                height: 80px;
                margin: 0 3px;
            }
            
            .radicals {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .key {
                height: 70px;
                margin: 0 2px;
            }
            
            .key-label {
                font-size: 1rem;
            }
            
            .radicals {
                font-size: 0.7rem;
                min-height: 30px;
            }
            
            .input-area {
                font-size: 1.5rem;
                min-height: 80px;
            }
            
            .key-space {
                width: 250px;
            }
            
            .key-enter, .key-backspace {
                width: 70px;
            }
        }
        
        .practice-mode {
            background: #e8f5e9;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            border: 2px solid #4caf50;
        }
        
        .radical-explanation {
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-keyboard"></i> 五笔字根练习键盘</h1>
            <p class="subtitle">点击键盘或使用物理键盘练习五笔打字，每个键显示完整的五笔字根</p>
            <div class="practice-mode">
                <i class="fas fa-check-circle" style="color: #4caf50;"></i>
                <span>练习模式已开启 - 按任意键开始练习</span>
            </div>
        </header>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="total-keys">0</div>
                <div class="stat-label">总按键数</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">准确率</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="time">00:00</div>
                <div class="stat-label">练习时间</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="speed">0</div>
                <div class="stat-label">字/分钟</div>
            </div>
        </div>
        
        <div class="input-display">
            <textarea class="input-area" id="input-area" placeholder="这里将显示您按下的键..."></textarea>
            
            <div class="current-key-info">
                <div class="key-info">
                    <div class="key-display" id="current-key">G</div>
                    <div class="radical-info">
                        <div>当前按键: <strong id="current-key-label">G</strong></div>
                        <div>五笔字根: <strong id="current-radicals">王旁青头戋五一</strong></div>
                        <div class="radical-explanation" id="radical-explanation">横区第1位，主要字根：王、𤣩、戋、五、一</div>
                    </div>
                </div>
                <div id="radical-details">
                    详细字根: <strong><span id="detailed-radicals">王𤣩戋五一</span></strong>
                </div>
            </div>
        </div>
        
        <div class="keyboard-container">
            <!-- 第一行 -->
            <div class="keyboard-row">
                <div class="key" data-key="`">
                    <div class="key-label">`</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="1">
                    <div class="key-label">1</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="2">
                    <div class="key-label">2</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="3">
                    <div class="key-label">3</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="4">
                    <div class="key-label">4</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="5">
                    <div class="key-label">5</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="6">
                    <div class="key-label">6</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="7">
                    <div class="key-label">7</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="8">
                    <div class="key-label">8</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="9">
                    <div class="key-label">9</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="0">
                    <div class="key-label">0</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="-">
                    <div class="key-label">-</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="=">
                    <div class="key-label">=</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-backspace" data-key="Backspace">
                    <div class="key-label">Backspace</div>
                    <div class="radicals"></div>
                </div>
            </div>
            
            <!-- 第二行 -->
            <div class="keyboard-row">
                <div class="key key-tab" data-key="Tab">
                    <div class="key-label">Tab</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="Q">
                    <div class="key-label">Q</div>
                    <div class="radicals"><span class="radical-item">金</span><span class="radical-item">钅</span><span class="radical-item">儿</span><span class="radical-item">夕</span></div>
                </div>
                <div class="key" data-key="W">
                    <div class="key-label">W</div>
                    <div class="radicals"><span class="radical-item">人</span><span class="radical-item">亻</span><span class="radical-item">八</span><span class="radical-item">登</span></div>
                </div>
                <div class="key" data-key="E">
                    <div class="key-label">E</div>
                    <div class="radicals"><span class="radical-item">月</span><span class="radical-item">彡</span><span class="radical-item">乃</span><span class="radical-item">用</span></div>
                </div>
                <div class="key" data-key="R">
                    <div class="key-label">R</div>
                    <div class="radicals"><span class="radical-item">白</span><span class="radical-item">手</span><span class="radical-item">扌</span><span class="radical-item">看</span></div>
                </div>
                <div class="key" data-key="T">
                    <div class="key-label">T</div>
                    <div class="radicals"><span class="radical-item">禾</span><span class="radical-item">竹</span><span class="radical-item">丿</span><span class="radical-item">彳</span></div>
                </div>
                <div class="key" data-key="Y">
                    <div class="key-label">Y</div>
                    <div class="radicals"><span class="radical-item">言</span><span class="radical-item">讠</span><span class="radical-item">文</span><span class="radical-item">方</span></div>
                </div>
                <div class="key" data-key="U">
                    <div class="key-label">U</div>
                    <div class="radicals"><span class="radical-item">立</span><span class="radical-item">辛</span><span class="radical-item">六</span><span class="radical-item">门</span></div>
                </div>
                <div class="key" data-key="I">
                    <div class="key-label">I</div>
                    <div class="radicals"><span class="radical-item">水</span><span class="radical-item">氵</span><span class="radical-item">小</span><span class="radical-item">⺌</span></div>
                </div>
                <div class="key" data-key="O">
                    <div class="key-label">O</div>
                    <div class="radicals"><span class="radical-item">火</span><span class="radical-item">米</span><span class="radical-item">灬</span><span class="radical-item">业</span></div>
                </div>
                <div class="key" data-key="P">
                    <div class="key-label">P</div>
                    <div class="radicals"><span class="radical-item">之</span><span class="radical-item">辶</span><span class="radical-item">冖</span><span class="radical-item">宀</span></div>
                </div>
                <div class="key" data-key="[">
                    <div class="key-label">[</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="]">
                    <div class="key-label">]</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="\">
                    <div class="key-label">\</div>
                    <div class="radicals"></div>
                </div>
            </div>
            
            <!-- 第三行 -->
            <div class="keyboard-row">
                <div class="key key-capslock" data-key="CapsLock">
                    <div class="key-label">CapsLock</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="A">
                    <div class="key-label">A</div>
                    <div class="radicals"><span class="radical-item">工</span><span class="radical-item">匚</span><span class="radical-item">艹</span><span class="radical-item">弋</span></div>
                </div>
                <div class="key" data-key="S">
                    <div class="key-label">S</div>
                    <div class="radicals"><span class="radical-item">木</span><span class="radical-item">丁</span><span class="radical-item">西</span><span class="radical-item">覀</span></div>
                </div>
                <div class="key" data-key="D">
                    <div class="key-label">D</div>
                    <div class="radicals"><span class="radical-item">大</span><span class="radical-item">犬</span><span class="radical-item">古</span><span class="radical-item">石</span></div>
                </div>
                <div class="key" data-key="F">
                    <div class="key-label">F</div>
                    <div class="radicals"><span class="radical-item">土</span><span class="radical-item">士</span><span class="radical-item">二</span><span class="radical-item">干</span></div>
                </div>
                <div class="key" data-key="G">
                    <div class="key-label">G</div>
                    <div class="radicals"><span class="radical-item">王</span><span class="radical-item">𤣩</span><span class="radical-item">戋</span><span class="radical-item">五</span></div>
                </div>
                <div class="key" data-key="H">
                    <div class="key-label">H</div>
                    <div class="radicals"><span class="radical-item">目</span><span class="radical-item">具</span><span class="radical-item">上</span><span class="radical-item">止</span></div>
                </div>
                <div class="key" data-key="J">
                    <div class="key-label">J</div>
                    <div class="radicals"><span class="radical-item">日</span><span class="radical-item">曰</span><span class="radical-item">早</span><span class="radical-item">虫</span></div>
                </div>
                <div class="key" data-key="K">
                    <div class="key-label">K</div>
                    <div class="radicals"><span class="radical-item">口</span><span class="radical-item">川</span><span class="radical-item">丬</span></div>
                </div>
                <div class="key" data-key="L">
                    <div class="key-label">L</div>
                    <div class="radicals"><span class="radical-item">田</span><span class="radical-item">甲</span><span class="radical-item">四</span><span class="radical-item">皿</span></div>
                </div>
                <div class="key" data-key=";">
                    <div class="key-label">;</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="'">
                    <div class="key-label">'</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-enter" data-key="Enter">
                    <div class="key-label">Enter</div>
                    <div class="radicals"></div>
                </div>
            </div>
            
            <!-- 第四行 -->
            <div class="keyboard-row">
                <div class="key key-shift" data-key="Shift">
                    <div class="key-label">Shift</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="Z">
                    <div class="key-label">Z</div>
                    <div class="radicals"><span class="radical-item">万能键</span></div>
                </div>
                <div class="key" data-key="X">
                    <div class="key-label">X</div>
                    <div class="radicals"><span class="radical-item">纟</span><span class="radical-item">糹</span><span class="radical-item">匕</span><span class="radical-item">母</span></div>
                </div>
                <div class="key" data-key="C">
                    <div class="key-label">C</div>
                    <div class="radicals"><span class="radical-item">又</span><span class="radical-item">巴</span><span class="radical-item">厶</span><span class="radical-item">马</span></div>
                </div>
                <div class="key" data-key="V">
                    <div class="key-label">V</div>
                    <div class="radicals"><span class="radical-item">女</span><span class="radical-item">刀</span><span class="radical-item">九</span><span class="radical-item">臼</span></div>
                </div>
                <div class="key" data-key="B">
                    <div class="key-label">B</div>
                    <div class="radicals"><span class="radical-item">子</span><span class="radical-item">孑</span><span class="radical-item">耳</span><span class="radical-item">阝</span></div>
                </div>
                <div class="key" data-key="N">
                    <div class="key-label">N</div>
                    <div class="radicals"><span class="radical-item">已</span><span class="radical-item">己</span><span class="radical-item">巳</span><span class="radical-item">羽</span></div>
                </div>
                <div class="key" data-key="M">
                    <div class="key-label">M</div>
                    <div class="radicals"><span class="radical-item">山</span><span class="radical-item">由</span><span class="radical-item">贝</span><span class="radical-item">骨</span></div>
                </div>
                <div class="key" data-key=",">
                    <div class="key-label">,</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key=".">
                    <div class="key-label">.</div>
                    <div class="radicals"></div>
                </div>
                <div class="key" data-key="/">
                    <div class="key-label">/</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-shift" data-key="Shift">
                    <div class="key-label">Shift</div>
                    <div class="radicals"></div>
                </div>
            </div>
            
            <!-- 第五行 -->
            <div class="keyboard-row">
                <div class="key key-ctrl" data-key="Control">
                    <div class="key-label">Ctrl</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-alt" data-key="Alt">
                    <div class="key-label">Alt</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-space" data-key=" ">
                    <div class="key-label">Space</div>
                    <div class="radicals">空格</div>
                </div>
                <div class="key key-alt" data-key="Alt">
                    <div class="key-label">Alt</div>
                    <div class="radicals"></div>
                </div>
                <div class="key key-ctrl" data-key="Control">
                    <div class="key-label">Ctrl</div>
                    <div class="radicals"></div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn-start" id="start-btn">
                <i class="fas fa-play"></i> 开始练习
            </button>
            <button class="btn-reset" id="reset-btn">
                <i class="fas fa-redo"></i> 重置统计
            </button>
            <button class="btn-clear" id="clear-btn">
                <i class="fas fa-eraser"></i> 清空输入
            </button>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> 五笔字根分布说明</h3>
            <ul>
                <li><strong>横区（1区）G-F-D-S-A：</strong> 王(G)土(F)大(D)木(S)工(A)</li>
                <li><strong>竖区（2区）H-J-K-L-M：</strong> 目(H)日(J)口(K)田(L)山(M)</li>
                <li><strong>撇区（3区）T-R-E-W-Q：</strong> 禾(T)白(R)月(E)人(W)金(Q)</li>
                <li><strong>捺区（4区）Y-U-I-O-P：</strong> 言(Y)立(U)水(I)火(O)之(P)</li>
                <li><strong>折区（5区）N-B-V-C-X：</strong> 已(N)子(B)女(V)又(C)纟(X)</li>
                <li><strong>Z键：</strong> 万能学习键，用于查询编码</li>
                <li>每个键上显示该键的主要字根，点击键或使用物理键盘输入时，上方会显示详细字根信息</li>
            </ul>
        </div>
    </div>
    
    <footer>
        <p>五笔字根练习键盘 - 完整字根版 © 2023 | 设计用于五笔输入法学习和练习</p>
    </footer>

    <script>
        // 五笔字根完整数据 - 每个键上的所有主要字根
        const wubiCompleteRadicals = {
            'G': ['王', '𤣩', '戋', '五', '一'],
            'F': ['土', '士', '二', '干', '十', '寸', '雨'],
            'D': ['大', '犬', '三', '古', '石', '厂', '𠂇', '𡗗'],
            'S': ['木', '丁', '西', '覀'],
            'A': ['工', '匚', '艹', '弋', '廿', '廾'],
            'H': ['目', '具', '上', '止', '卜', '𠂤', '丨'],
            'J': ['日', '曰', '早', '虫', '刂'],
            'K': ['口', '川', '丬'],
            'L': ['田', '甲', '四', '皿', '车', '力', '罒'],
            'M': ['山', '由', '贝', '骨', '冂', '几'],
            'T': ['禾', '竹', '丿', '彳', '夂', '攵'],
            'R': ['白', '手', '扌', '看', '斤', '气'],
            'E': ['月', '彡', '乃', '用', '家', '衣', '豕'],
            'W': ['人', '亻', '八', '登', '祭'],
            'Q': ['金', '钅', '儿', '夕', '勹', '鱼'],
            'Y': ['言', '讠', '文', '方', '广', '亠', '圭'],
            'U': ['立', '辛', '六', '门', '疒', '丬'],
            'I': ['水', '氵', '小', '⺌', '光', '业'],
            'O': ['火', '米', '灬', '业', '亦'],
            'P': ['之', '辶', '冖', '宀', '礻'],
            'N': ['已', '己', '巳', '羽', '尸', '心', '忄'],
            'B': ['子', '孑', '耳', '阝', '也', '凵', '了'],
            'V': ['女', '刀', '九', '臼', '巛', '彐'],
            'C': ['又', '巴', '厶', '马', '牜'],
            'X': ['纟', '糹', '匕', '母', '弓', '幺'],
            'Z': ['万能键']  // Z键为万能键
        };
        
        // 五笔字根口诀
        const wubiRhymes = {
            'G': '王旁青头戋五一',
            'F': '土士二干十寸雨',
            'D': '大犬三羊古石厂',
            'S': '木丁西',
            'A': '工戈草头右框七',
            'H': '目具上止卜虎皮',
            'J': '日早两竖与虫依',
            'K': '口与川，字根稀',
            'L': '田甲方框四车力',
            'M': '山由贝，下框几',
            'T': '禾竹一撇双人立，反文条头共三一',
            'R': '白手看头三二斤',
            'E': '月彡(衫)乃用家衣底',
            'W': '人和八，三四里',
            'Q': '金勺缺点无尾鱼，犬旁留儿一点夕，氏无七(妻)',
            'Y': '言文方广在四一，高头一捺谁人去',
            'U': '立辛两点六门疒',
            'I': '水旁兴头小倒立',
            'O': '火业头，四点米',
            'P': '之字军盖建道底，摘礻(示)衤(衣)',
            'N': '已半巳满不出己，左框折尸心和羽',
            'B': '子耳了也框向上',
            'V': '女刀九臼山朝西',
            'C': '又巴马，丢矢矣',
            'X': '慈母无心弓和匕，幼无力'
        };
        
        // 状态变量
        let isPracticing = false;
        let startTime = null;
        let timerInterval = null;
        let totalKeysPressed = 0;
        let correctKeysPressed = 0;
        let lastKeyPressed = null;
        
        // DOM 元素
        const inputArea = document.getElementById('input-area');
        const currentKeyElement = document.getElementById('current-key');
        const currentKeyLabelElement = document.getElementById('current-key-label');
        const currentRadicalsElement = document.getElementById('current-radicals');
        const radicalDetailsElement = document.getElementById('detailed-radicals');
        const radicalExplanationElement = document.getElementById('radical-explanation');
        const totalKeysElement = document.getElementById('total-keys');
        const accuracyElement = document.getElementById('accuracy');
        const timeElement = document.getElementById('time');
        const speedElement = document.getElementById('speed');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const clearBtn = document.getElementById('clear-btn');
        const keys = document.querySelectorAll('.key');
        
        // 初始化
        function init() {
            // 设置虚拟键盘点击事件
            keys.forEach(key => {
                key.addEventListener('click', () => {
                    const keyValue = key.getAttribute('data-key');
                    simulateKeyPress(keyValue);
                });
            });
            
            // 设置按钮事件
            startBtn.addEventListener('click', startPractice);
            resetBtn.addEventListener('click', resetStats);
            clearBtn.addEventListener('click', clearInput);
            
            // 设置物理键盘事件
            document.addEventListener('keydown', handlePhysicalKeyPress);
            
            // 初始显示G键的信息
            updateKeyInfo('G');
            updateStatsDisplay();
        }
        
        // 处理物理键盘按键
        function handlePhysicalKeyPress(event) {
            if (!isPracticing) return;
            
            // 防止默认行为（如F5刷新）
            if (event.key === 'F5') {
                event.preventDefault();
                return;
            }
            
            const key = event.key;
            simulateKeyPress(key);
            
            // 高亮对应的虚拟键
            highlightVirtualKey(key);
        }
        
        // 模拟按键
        function simulateKeyPress(key) {
            if (!isPracticing && key !== 'Escape') {
                // 按ESC可以随时开始
                if (key === 'Escape') {
                    startPractice();
                }
                return;
            }
            
            // 更新统计
            totalKeysPressed++;
            
            // 记录按下的键
            lastKeyPressed = key.toUpperCase();
            
            // 更新输入区域
            updateInputArea(key);
            
            // 更新当前按键信息
            updateKeyInfo(key);
            
            // 更新统计显示
            updateStatsDisplay();
            
            // 高亮按键
            highlightKey(key);
        }
        
        // 更新输入区域
        function updateInputArea(key) {
            let currentText = inputArea.value;
            
            // 处理特殊键
            if (key === 'Backspace') {
                inputArea.value = currentText.substring(0, currentText.length - 1);
                return;
            }
            
            if (key === 'Enter') {
                inputArea.value += '\n';
                return;
            }
            
            if (key === 'Tab') {
                inputArea.value += '    ';
                return;
            }
            
            if (key === ' ') {
                inputArea.value += ' ';
                return;
            }
            
            // 只添加字母、数字和常见标点
            if (key.length === 1 && 
                (key.match(/[a-zA-Z0-9]/) || 
                 key.match(/[`~!@#$%^&*()\-_=+\[\]{}|;:'",.<>?\\/]/))) {
                inputArea.value += key;
            }
        }
        
        // 更新按键信息
        function updateKeyInfo(key) {
            const keyUpper = key.toUpperCase();
            
            // 更新当前按键显示
            currentKeyElement.textContent = keyUpper.length > 1 ? key : keyUpper;
            currentKeyLabelElement.textContent = getKeyDisplayName(key);
            
            // 获取字根数据
            const radicals = wubiCompleteRadicals[keyUpper];
            const rhyme = wubiRhymes[keyUpper];
            
            // 更新字根信息
            if (radicals) {
                currentRadicalsElement.textContent = rhyme || keyUpper + '键字根';
                radicalDetailsElement.textContent = radicals.join('');
                
                // 更新字根解释
                let explanation = '';
                if (rhyme) {
                    explanation = rhyme;
                } else if (keyUpper === 'Z') {
                    explanation = '万能学习键，用于查询编码';
                } else {
                    explanation = `${keyUpper}键主要字根：${radicals.join('、')}`;
                }
                radicalExplanationElement.textContent = explanation;
            } else {
                // 非字母键
                currentRadicalsElement.textContent = '功能键';
                radicalDetailsElement.textContent = getKeyDisplayName(key);
                radicalExplanationElement.textContent = '功能键，无五笔字根';
            }
        }
        
        // 获取键的显示名称
        function getKeyDisplayName(key) {
            const specialKeys = {
                ' ': '空格',
                'Backspace': '退格',
                'Enter': '回车',
                'Tab': '制表',
                'Shift': '上档',
                'Control': '控制',
                'Alt': '换挡',
                'CapsLock': '大写锁定',
                'Escape': '退出'
            };
            
            return specialKeys[key] || key.toUpperCase();
        }
        
        // 高亮按键
        function highlightKey(key) {
            // 移除之前的高亮
            keys.forEach(k => k.classList.remove('active'));
            
            // 高亮对应的键
            const keyUpper = key.toUpperCase();
            let keyElement = null;
            
            // 查找对应的键元素
            keys.forEach(k => {
                const dataKey = k.getAttribute('data-key');
                if (dataKey === key || dataKey === keyUpper || 
                    (key === ' ' && dataKey === ' ') ||
                    (key === 'Backspace' && dataKey === 'Backspace') ||
                    (key === 'Enter' && dataKey === 'Enter') ||
                    (key === 'Tab' && dataKey === 'Tab') ||
                    (key === 'Shift' && dataKey === 'Shift') ||
                    (key === 'Control' && dataKey === 'Control') ||
                    (key === 'Alt' && dataKey === 'Alt') ||
                    (key === 'CapsLock' && dataKey === 'CapsLock')) {
                    keyElement = k;
                }
            });
            
            if (keyElement) {
                keyElement.classList.add('active');
                
                // 1秒后移除高亮
                setTimeout(() => {
                    keyElement.classList.remove('active');
                }, 500);
            }
        }
        
        // 高亮虚拟键（用于物理键盘按下时）
        function highlightVirtualKey(key) {
            highlightKey(key);
        }
        
        // 开始练习
        function startPractice() {
            if (isPracticing) return;
            
            isPracticing = true;
            startTime = new Date();
            startBtn.innerHTML = '<i class="fas fa-pause"></i> 暂停练习';
            startBtn.classList.remove('btn-start');
            startBtn.classList.add('btn-reset');
            
            // 更新按钮事件
            startBtn.removeEventListener('click', startPractice);
            startBtn.addEventListener('click', pausePractice);
            
            // 启动计时器
            timerInterval = setInterval(updateTimer, 1000);
            
            // 提示
            inputArea.placeholder = "练习已开始，请使用键盘输入...";
            showMessage("练习已开始！按ESC键可随时退出练习模式。");
        }
        
        // 暂停练习
        function pausePractice() {
            isPracticing = false;
            clearInterval(timerInterval);
            startBtn.innerHTML = '<i class="fas fa-play"></i> 继续练习';
            startBtn.classList.remove('btn-reset');
            startBtn.classList.add('btn-start');
            
            // 更新按钮事件
            startBtn.removeEventListener('click', pausePractice);
            startBtn.addEventListener('click', startPractice);
            
            showMessage("练习已暂停");
        }
        
        // 更新计时器
        function updateTimer() {
            if (!startTime) return;
            
            const now = new Date();
            const diff = Math.floor((now - startTime) / 1000); // 秒
            const minutes = Math.floor(diff / 60);
            const seconds = diff % 60;
            
            timeElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // 计算打字速度（假设平均每个字5键）
            if (minutes > 0) {
                const words = Math.floor(totalKeysPressed / 5);
                const speed = Math.floor(words / minutes);
                speedElement.textContent = speed;
            }
        }
        
        // 更新统计显示
        function updateStatsDisplay() {
            totalKeysElement.textContent = totalKeysPressed;
            
            // 计算准确率
            const accuracy = totalKeysPressed > 0 ? 
                Math.round((correctKeysPressed / totalKeysPressed) * 100) : 100;
            accuracyElement.textContent = `${accuracy}%`;
        }
        
        // 重置统计
        function resetStats() {
            totalKeysPressed = 0;
            correctKeysPressed = 0;
            startTime = null;
            clearInterval(timerInterval);
            timeElement.textContent = "00:00";
            speedElement.textContent = "0";
            updateStatsDisplay();
            
            if (isPracticing) {
                startTime = new Date();
                timerInterval = setInterval(updateTimer, 1000);
            }
            
            showMessage("统计已重置");
        }
        
        // 清空输入
        function clearInput() {
            inputArea.value = '';
            showMessage("输入已清空");
        }
        
        // 显示消息
        function showMessage(message) {
            // 创建临时消息元素
            const messageEl = document.createElement('div');
            messageEl.textContent = message;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4caf50;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                font-weight: bold;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(messageEl);
            
            // 3秒后移除
            setTimeout(() => {
                messageEl.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                }, 300);
            }, 3000);
        }
        
        // 添加CSS动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // 初始化应用
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>