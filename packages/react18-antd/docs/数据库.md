æˆ‘æ¥ä¸ºæ‚¨æ¢³ç†èƒ½å¤ŸåŒæ—¶æ”¯æŒ**MySQLã€PostgreSQLã€Oracleã€SQL Serverã€SQLite**è¿™äº”ç§æ•°æ®åº“çš„è§£å†³æ–¹æ¡ˆã€‚æ ¹æ®æ‚¨æè¿°çš„éœ€æ±‚â€”â€”éœ€è¦åŒæ—¶æ”¯æŒå¤šç§å…³ç³»å‹æ•°æ®åº“ï¼Œç›®å‰ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»è§£å†³æ–¹æ¡ˆï¼š

### ğŸ› ï¸ **æ–¹æ¡ˆå¯¹æ¯”ï¼šSQLæŸ¥è¯¢æ„å»ºå™¨ vs ORM**

| æ–¹æ¡ˆç±»å‹ | æ¨èå·¥å…· | æ”¯æŒæ•°æ®åº“ | æ ¸å¿ƒç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|:---|:---|:---|:---|:---|
| **SQLæŸ¥è¯¢æ„å»ºå™¨** | **Knex.js** | âœ… MySQL, PostgreSQL, Oracle, SQLite, SQL Serverç­‰ | æä¾›ç»Ÿä¸€çš„SQLæŸ¥è¯¢æ¥å£ï¼Œçµæ´»ã€è´´è¿‘SQLï¼Œæ˜¯è®¸å¤šORMçš„åº•å±‚ä¾èµ– | éœ€è¦ç›´æ¥æ§åˆ¶SQLã€ç¼–å†™å¤æ‚æŸ¥è¯¢æˆ–æ„å»ºé€šç”¨æ•°æ®åº“å·¥å…· |
| **Node.js ORM** | **Sequelize** | âœ… MySQL, PostgreSQL, SQLite, SQL Server, Oracle (éœ€é©±åŠ¨) | åŠŸèƒ½å…¨é¢çš„ORMï¼Œæä¾›æ¨¡å‹ã€å…³è”ã€äº‹åŠ¡ã€è¿ç§»ç­‰é«˜å±‚æŠ½è±¡ | éœ€è¦é¢å‘å¯¹è±¡æ“ä½œã€æ¨¡å‹å…³è”ã€æ•°æ®è¿ç§»ç­‰ORMç‰¹æ€§ |
| **Node.js ORM** | **TypeORM** | âœ… å…¨éƒ¨æ”¯æŒ | åŸºäºTypeScriptè®¾è®¡ï¼Œæ”¯æŒActive Recordå’ŒData Mapperæ¨¡å¼ | TypeScripté¡¹ç›®ï¼Œéœ€è¦è£…é¥°å™¨è¯­æ³•å’Œæ›´ç°ä»£çš„ORMä½“éªŒ |
| **æŸ¥è¯¢æ„å»ºå™¨ + ORM** | **Prisma** (éœ€Prisma Client) | âœ… MySQL, PostgreSQL, SQLite, SQL Server, Oracle (é¢„è§ˆ) | ä¸‹ä¸€ä»£ORMï¼Œç±»å‹å®‰å…¨ï¼Œè‡ªå¸¦è¿ç§»å·¥å…·å’Œå¯è§†åŒ–æ•°æ®æµè§ˆå™¨ | å¼ºè°ƒå¼€å‘ä½“éªŒã€ç±»å‹å®‰å…¨å’Œç°ä»£å·¥ä½œæµçš„æ–°é¡¹ç›® |

### ğŸ—ºï¸ å†³ç­–æµç¨‹å›¾ï¼šå¦‚ä½•é€‰æ‹©æœ€é€‚åˆæ‚¨çš„å·¥å…·ï¼Ÿ

```mermaid
flowchart TD
    A[éœ€æ±‚ï¼šåŒæ—¶æ”¯æŒäº”å¤§å…³ç³»å‹æ•°æ®åº“] --> B{é¡¹ç›®æ ¸å¿ƒéœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ}

    B --> C[éœ€è¦æè‡´çµæ´»æ€§<br>ç›´æ¥ç¼–å†™/æ§åˆ¶SQL]
    C --> D[é€‰æ‹© SQLæŸ¥è¯¢æ„å»ºå™¨<br>ï¼ˆå¦‚ Knex.jsï¼‰]
    D --> E[ç‰¹ç‚¹ï¼šè½»é‡ã€çµæ´»ã€å­¦ä¹ æ›²çº¿ä½]

    B --> F[éœ€è¦é«˜çº§æŠ½è±¡ä¸å…³è”<br>é¢å‘å¯¹è±¡æ“ä½œæ•°æ®]
    F --> G{é¡¹ç›®æŠ€æœ¯æ ˆï¼Ÿ}
    
    G --> H[ä½¿ç”¨ TypeScript]
    H --> I[é€‰æ‹© TypeORM<br>ï¼ˆè£…é¥°å™¨è¯­æ³•ï¼ŒTSåŸç”Ÿï¼‰]
    
    G --> J[ä½¿ç”¨çº¯ JavaScript<br>æˆ–éœ€è¦æˆç†Ÿç¨³å®šæ–¹æ¡ˆ]
    J --> K[é€‰æ‹© Sequelize<br>ï¼ˆåŠŸèƒ½å…¨é¢ï¼Œç”Ÿæ€æˆç†Ÿï¼‰]

    B --> L[è¿½æ±‚æœ€ä½³å¼€å‘ä½“éªŒ<br>å¼ºç±»å‹å®‰å…¨ä¸ç›´è§‚API]
    L --> M[é€‰æ‹© Prisma<br>ï¼ˆç°ä»£ORMï¼Œè‡ªå¸¦å¼ºå¤§å·¥å…·é“¾ï¼‰]
```

### ğŸ“ å„æ–¹æ¡ˆè¯¦è§£ä¸ä»£ç ç¤ºä¾‹

#### 1. **Knex.js (SQLæŸ¥è¯¢æ„å»ºå™¨) - çµæ´»æ§åˆ¶SQL**
   Knex.jsä¸ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ˜¯æä¾›ç»Ÿä¸€çš„APIæ¥æ„å»ºSQLè¯­å¥ã€‚
   ```javascript
   // å®‰è£…: npm install knex mysql2 (æˆ–pg, oracledb, tedious, sqlite3ç­‰)
   const knex = require('knex')({
     client: 'mysql', // å¯æ”¹ä¸º 'pg', 'oracledb', 'mssql', 'sqlite3'
     connection: {
       host: '127.0.0.1',
       user: 'your_user',
       password: 'your_password',
       database: 'your_db'
     }
   });

   // ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•ï¼ŒKnexä¼šç”Ÿæˆå¯¹åº”æ•°æ®åº“çš„SQL
   const users = await knex('users')
     .select('id', 'name')
     .where({ status: 'active' })
     .orderBy('created_at', 'desc')
     .limit(10);
   ```

#### 2. **Sequelize (æˆç†ŸORM) - åŠŸèƒ½å…¨é¢**
   ```javascript
   // å®‰è£…: npm install sequelize mysql2 (æˆ–å¯¹åº”é©±åŠ¨)
   const { Sequelize, DataTypes } = require('sequelize');

   // è¿æ¥ä¸åŒæ•°æ®åº“åªéœ€æ”¹å˜dialectå‚æ•°
   const sequelize = new Sequelize('database', 'username', 'password', {
     host: 'localhost',
     dialect: 'postgres', // 'mysql' | 'postgres' | 'sqlite' | 'mssql' | 'oracle'
   });

   // å®šä¹‰æ¨¡å‹
   const User = sequelize.define('User', {
     name: { type: DataTypes.STRING },
     email: { type: DataTypes.STRING, unique: true }
   });

   // é¢å‘å¯¹è±¡æ“ä½œ
   const newUser = await User.create({ name: 'John', email: 'john@example.com' });
   const activeUsers = await User.findAll({ where: { status: 'active' } });
   ```

#### 3. **TypeORM (TypeScript ORM) - ç°ä»£å¼€å‘ä½“éªŒ**
   ```typescript
   // å®‰è£…: npm install typeorm reflect-metadata
   import { Entity, PrimaryGeneratedColumn, Column, createConnection } from 'typeorm';

   @Entity()
   export class User {
     @PrimaryGeneratedColumn()
     id: number;

     @Column()
     name: string;

     @Column()
     email: string;
   }

   // åœ¨ormconfig.jsonä¸­é…ç½®æ•°æ®åº“è¿æ¥
   // æ”¯æŒmysql, postgres, sqlite, mssql, oracle
   const connection = await createConnection();
   const userRepository = connection.getRepository(User);
   const users = await userRepository.find({ where: { status: 'active' } });
   ```

#### 4. **Prisma (ä¸‹ä¸€ä»£ORM) - ç±»å‹å®‰å…¨ä¸å·¥å…·é“¾**
   ```javascript
   // 1. å®šä¹‰æ•°æ®æ¨¡å‹ (schema.prisma)
   model User {
     id    Int     @id @default(autoincrement())
     name  String
     email String  @unique
   }

   // 2. ç”Ÿæˆç±»å‹å®‰å…¨çš„å®¢æˆ·ç«¯
   // npx prisma generate

   // 3. ä½¿ç”¨
   const { PrismaClient } = require('@prisma/client');
   const prisma = new PrismaClient();

   const newUser = await prisma.user.create({
     data: { name: 'Alice', email: 'alice@example.com' }
   });
   ```

### ğŸ’¡ é‡è¦æé†’ï¼šæ¶æ„ä¸å®‰å…¨

**æ— è®ºé€‰æ‹©å“ªä¸ªåº“ï¼Œéƒ½éœ€è¦æ³¨æ„**ï¼š
1.  **è¿™äº›éƒ½æ˜¯åœ¨Node.jsåç«¯ç¯å¢ƒä½¿ç”¨çš„åº“**ï¼Œä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œçš„ã€‚
2.  **ç»å¯¹ä¸èƒ½åœ¨å‰ç«¯ä»£ç ä¸­æš´éœ²æ•°æ®åº“è¿æ¥ä¿¡æ¯**ï¼ˆå¦‚ä¸»æœºã€ç”¨æˆ·åã€å¯†ç ï¼‰ã€‚
3.  æ­£ç¡®çš„æ¶æ„æ˜¯ï¼šå‰ç«¯é€šè¿‡HTTP APIï¼ˆå¦‚RESTfulã€GraphQLï¼‰è¯·æ±‚åç«¯æœåŠ¡ï¼Œç”±åç«¯æœåŠ¡ä½¿ç”¨ä¸Šè¿°åº“å®‰å…¨åœ°æ“ä½œæ•°æ®åº“ã€‚

### ğŸ¯ æˆ‘çš„å»ºè®®

1.  **ä»Knex.jså¼€å§‹**ï¼šå¦‚æœæ‚¨å¯¹SQLç†Ÿæ‚‰ï¼Œéœ€è¦çµæ´»æ€§ï¼Œæˆ–æ­£åœ¨æ„å»ºéœ€è¦æ”¯æŒå¤šç§æ•°æ®åº“çš„å·¥å…·/ä¸­é—´ä»¶ã€‚
2.  **é€‰æ‹©Sequelize**ï¼šå¦‚æœæ‚¨çš„é¡¹ç›®éœ€è¦æˆç†Ÿçš„ORMåŠŸèƒ½ï¼ˆå¦‚æ•°æ®å…³è”ã€è¿ç§»ã€äº‹åŠ¡ï¼‰ï¼Œå¹¶ä¸”å›¢é˜Ÿå·²ç»ç†Ÿæ‚‰Active Recordæ¨¡å¼ã€‚
3.  **å°è¯•TypeORM**ï¼šå¦‚æœé¡¹ç›®ä½¿ç”¨TypeScriptï¼Œå¹¶ä¸”æ‚¨å–œæ¬¢è£…é¥°å™¨è¯­æ³•å’Œæ›´ç°ä»£çš„æ¶æ„ã€‚
4.  **è€ƒè™‘Prisma**ï¼šå¦‚æœæ˜¯æ–°é¡¹ç›®ï¼Œæ³¨é‡å¼€å‘ä½“éªŒã€ç±»å‹å®‰å…¨å’Œç›´è§‚çš„æ•°æ®æ“ä½œã€‚

å¦‚æœæ‚¨èƒ½å‘Šè¯‰æˆ‘æ›´å¤šå…³äºæ‚¨çš„**é¡¹ç›®ç±»å‹**ï¼ˆå¦‚Webåº”ç”¨ã€ä¼ä¸šè½¯ä»¶ã€å·¥å…·å¼€å‘ç­‰ï¼‰ã€**æŠ€æœ¯æ ˆ**ï¼ˆå¦‚Node.jsç‰ˆæœ¬ã€æ˜¯å¦ä½¿ç”¨TypeScriptï¼‰å’Œ**å…·ä½“ä½¿ç”¨åœºæ™¯**ï¼Œæˆ‘å¯ä»¥ç»™æ‚¨æ›´ç²¾ç¡®çš„å»ºè®®ã€‚